<button class="btn btn-primary pull-right" (click)="addUserMatrix()">
  <i class="fa fa-plus" aria-hidden="true"></i> Add User Matrix</button>

<popup #createMatrix (cancelClick)="closePopup()">
  <div class="col-md-12">

    <div class="box box-info">


      <form class="form-horizontal" name="createMatrix" #createMatrix="ngForm" (ngSubmit)="saveMatrix();createMatrix.reset();">
        <div class="box-body">

          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Business Unit</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineBusinessUnitValue" [(ngModel)]="WorklineBusinessUnitValue" (change)="getWorklineProduct()"
                required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WBU of WorklineBusinessUnit" [ngValue]="WBU.businessUnitId">
                  {{WBU.businessUnitName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">workline Product</label>
            <div class="col-sm-10">
              <select class="form-control" name="WorklineBusinessUnitProductValue" [(ngModel)]="WorklineBusinessUnitProductValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WBUP of WorklineBusinessProductUnit" [ngValue]="WBUP.productId">
                  {{WBUP.productName}}
                </option>
              </select>
            </div>
          </div>


          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Function</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklinefunctionValue" [(ngModel)]="WorklinefunctionValue" (change)="getWorklineSubFunction()"
                required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WFL of worklineFunctionList" [ngValue]="WFL.worklineFunctionId">
                  {{WFL.worklineFunctionName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Sub Workline Function</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineSubFunctionValue" [(ngModel)]="WorklineSubFunctionValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WFSL of WorklineSubFunctionList" [ngValue]="WFSL.worklineSubFunctionId">
                  {{WFSL.worklineSubFunctionName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Role</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineRoleValue" [(ngModel)]="WorklineRoleValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WR of WorklineRole" [ngValue]="WR.worklineRoleId">
                  {{WR.worklineRoleName}}
                </option>
              </select>
            </div>
          </div>

          <hr>
         
          <div class="clear" *ngFor="let row of ' '.repeat(noOfApp).split(''); let feildCount = index; " id="form_group_{{feildCount + 1}}">
            <div class="col-md-2">&nbsp;</div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Application Name</label>
                <select class="form-control" name="ApplicationNameValue_{{feildCount}}" [(ngModel)]="ApplicationNameValue[feildCount]" (change)="getApplicationRole(feildCount)"
                  required>
                  <option value="" selected disabled>Select Option</option>
                  <option *ngFor="let ANL of ApplicationNameList" [value]="ANL.applicationId">
                    {{ANL.applicationName}}
                  </option>
                </select>
              </div>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <div class="col-md-4">
              <div class="form-group">
                <label>Application Role</label>
                <select class="form-control" name="ApplicationRoleValue_{{feildCount}}" [(ngModel)]="ApplicationRoleValue[feildCount]" required>
                  <option value="" selected disabled>Select Option</option>
                  <option *ngFor="let ARL of ApplicationRoleList[feildCount]" [value]="ARL.applicationRoleId">
                    {{ARL.applicationRoleName}}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-md-1">
              <a (click)="removeInput(feildCount)">
                <i class="fa fa-minus-circle icon-large"></i>
              </a>
            </div>
          </div>

          <div class="col-sm-3 add-link-button">
            <button type="button" class="btn btn-block btn-default" (click)="addLink()">
              <i class="fa fa-plus"></i> &nbsp; Add Field</button>
          </div>

        </div>

        <div class="box-footer">
          <button type="reset" class="btn btn-default" (click)="closePopup()">Cancel</button>
          <button type="submit" [disabled]="!createMatrix.form.valid" class="btn btn-info pull-right">Submit</button>
        </div>

      </form>
    </div>

  </div>
</popup>

<popup #editWorklineMatrix (cancelClick)="closePopup()">
  <div class="col-md-12">
    <div class="box box-info">

      <form class="form-horizontal" name="editWorklineMatrixForm" #editWorklineMatrixForm="ngForm" (ngSubmit)="editWorklineMatrixSubmit();editWorklineMatrixForm.reset();">
        <div class="box-body">

          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Business Unit</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineBusinessUnitValue" [(ngModel)]="WorklineBusinessUnitValue" (change)="getWorklineProduct()"
                required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WBU of WorklineBusinessUnit" [ngValue]="WBU.businessUnitId">
                  {{WBU.businessUnitName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">workline Product</label>
            <div class="col-sm-10">
              <select class="form-control" name="WorklineBusinessUnitProductValue" [(ngModel)]="WorklineBusinessUnitProductValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WBUP of WorklineBusinessProductUnit" [ngValue]="WBUP.productId">
                  {{WBUP.productName}}
                </option>
              </select>
            </div>
          </div>


          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Function</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklinefunctionValue" [(ngModel)]="WorklinefunctionValue" (change)="getWorklineSubFunction()"
                required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WFL of worklineFunctionList" [ngValue]="WFL.worklineFunctionId">
                  {{WFL.worklineFunctionName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Sub Workline Function</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineSubFunctionValue" [(ngModel)]="WorklineSubFunctionValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WFSL of WorklineSubFunctionList" [ngValue]="WFSL.worklineSubFunctionId">
                  {{WFSL.worklineSubFunctionName}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="col-sm-2 control-label">Workline Role</label>

            <div class="col-sm-10">
              <select class="form-control" name="WorklineRoleValue" [(ngModel)]="WorklineRoleValue" required>
                <option value="" selected disabled>Select Option</option>
                <option *ngFor="let WR of WorklineRole" [ngValue]="WR.worklineRoleId">
                  {{WR.worklineRoleName}}
                </option>
              </select>
            </div>
          </div>

          <hr>

          <div class="clear" *ngFor="let row of ' '.repeat(noOfApp).split(''); let feildCount = index;" id="form_group_{{feildCount + 1}}">
            <div class="col-md-2">&nbsp;</div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Application Name</label>
                <select class="form-control" name="ApplicationNameValue_{{feildCount}}" [(ngModel)]="ApplicationNameValue[feildCount]" (change)="getApplicationRole(feildCount)"
                  required>
                  <option value="" selected disabled>Select Option</option>
                  <option *ngFor="let ANL of ApplicationNameList" [value]="ANL.applicationId">
                    {{ANL.applicationName}}
                  </option>
                </select>
              </div>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <div class="col-md-4">
              <div class="form-group">
                <label>Application Role</label>
                <select class="form-control" name="ApplicationRoleValue_{{feildCount}}" [(ngModel)]="ApplicationRoleValue[feildCount]" required>
                  <option value="" selected disabled>Select Option</option>
                  <option *ngFor="let ARL of ApplicationRoleList[feildCount]" [value]="ARL.applicationRoleId">
                    {{ARL.applicationRoleName}}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-md-1">
              <a (click)="removeInput(feildCount)">
                <i class="fa fa-minus-circle icon-large"></i>
              </a>
            </div>
          </div>

          <div class="col-sm-3 add-link-button">
            <button type="button" class="btn btn-block btn-default" (click)="addLink()">
              <i class="fa fa-plus"></i> &nbsp; Add Field</button>
          </div>

        </div>

        <div class="box-footer">
          <button type="reset" class="btn btn-default" (click)="closePopup()">Cancel</button>
          <button type="submit" [disabled]="!editWorklineMatrixForm.form.valid" class="btn btn-info pull-right">Submit</button>
        </div>

      </form>
    </div>

  </div>
</popup>


<div id="preview" class="col s12 m9 l12">
  <p>
    <button type="button" class="btn waves-effect waves-light blue" (click)="rerender()">
      <i class="fa fa-refresh" aria-hidden="true"></i> Refresh
    </button>
  </p>
  <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover"></table>
</div>